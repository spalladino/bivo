<% content_for(:head) do %>
	<%= javascript_include_tag "pagination" %>
<% end %>

<% content_for(:js) do %>

  $(function() {
    $('#filters select').add('#filters input').change(function() {
			$('#filter_form').submit();
		});
	});
<% end %>

<% title _('Causes') %>

<div class="inbodyM">
	<div class="bodyInner">
  	<div class="statGrT">
    	<h2><%=_('Causes List')%></h2>
      <div class="grNav">
      	<ul>
					<% @categories.each_with_index do |category, idx| %>
						<% if idx > 0 %><li class="grPipe">|</li><% end %>
						<li><%= link_to "#{category.name} (#{category.causes_count})", category_filter_url(category)%></li>
      		<% end%>
      	</ul>
      </div>
    </div>

    <div class="boxMain">
			<%= select_tag :status, options_from_collection_for_select(@statuses, 'to_s', 'description', @status), :class => 'showChoo' %>
			<p class="showTxt"><%=_("Show")%></p>
		  <br class="spacer" />

			<div class="gnFilMain">
      	<p class="genFilTxt"><%= _('Sort by') %></p>
      	<%= select_tag :sorting, options_for_select(@sortings, @sorting), :class => 'genChoo' %>
      	
        <p class="genFilTxt causfilTxt"><%= _('Filter by region') %></p>
        <%= select_tag :region, options_from_collection_for_select(@regions, 'id', 'name', @region), {:include_blank => _('All countries')}, :class => 'genChoo' %>

        <p class="genFilTxt"><%= _('Filter by') %></p>
        <%= text_field_tag :name, @name, :id => 'name_filter', :class => 'genChoo' %>

        <div id="causes">
          <%= render 'causes' %>
        </div>

   
                <div class="pegi">
                	<ul>
                    	<li><a href="#"><img src="images/pegiarL.png" width="4" height="7" alt="" /></a></li>
                        <li><a href="#">1</a></li>
                        <li><a href="#">2</a></li>
                        <li><a href="#">3</a></li>
                        <li><a href="#">4</a></li>
                        <li><a href="#">5</a></li>
                        <li class="noPad"><a href="#"><img src="images/pegiarR.png" width="4" height="7" alt="" /></a></li><br class="spacer" />
                    </ul>
          		</div><br class="spacer" />
            </div>
        	
            
        <div class="rgtFilmarg">
          <%= select_tag :per_page, options_from_collection_for_select(@page_sizes, 'to_i', 'to_s', @per_page), :class => 'showChoo'%>
          <p class="showTxt"><%= _("Show per page")%></p>
          <br class="spacer" />
        </div>
      </div>
    </div>
  <div class="bodyBot"></div>
</div>



<h2>Filters</h2>

<div id="filters">
	<%= form_tag causes_path, :method => :get, :id => "filter_form" do %>
		<table cellspacing="5">
			<tr>
				<td><%= _("Categories") %>: </td>
				<td>
					<% @categories.each do |category| %>
						<%= link_to "#{category.name} (#{category.causes_count})", category_filter_url(category)%>
					<% end%>
				</td>
			<tr>
				<td><%= _('Filter by region') %></td>
				<td><%= select_tag :region, options_from_collection_for_select(@regions, 'id', 'name', @region), {:include_blank => _('All countries')}%></td>
			</tr>
			<tr>
				<td><%= _("Show per page")%></td>
				<td><%= select_tag :per_page, options_from_collection_for_select(@page_sizes, 'to_i', 'to_s', @per_page)%></td>
			</tr>
			<tr>
				<td><%= _('Showing') %></td>
				<td><%= select_tag :status, options_from_collection_for_select(@statuses, 'to_s', 'description', @status) %></td>
			</tr>
			<tr>
				<td><%= _('Sort by') %></td>
				<td><%= select_tag :sorting, options_for_select(@sortings, @sorting) %></td>
			</tr>
			<tr>
				<td><%= _('Filter by') %></td>
				<td><%= text_field_tag :name, @name, :id => 'name_filter' %> <%= link_to_function(_('clear'), "$('#name_filter').val('').change();") if @name %></td>
			</tr>
		</table>
		<p>
			<%= submit_tag _('Search'), :disable_with => _('Searching...') %>
		</p>
	<% end %>
</div>

<br/>



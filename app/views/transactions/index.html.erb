<% content_for(:head) do %>
	<%= javascript_include_tag "pagination" %>
<% end %>

<% content_for(:js) do %>

  $(function() {
    $('#period').change(function() {
			if ($('#period').attr('value') == "custom")
      {
        $('#custom').show();
      }
      else{
        $('#custom').hide();
      }
     });
	});
<% end %>

<% title "Transactions" %>

<%=_("Transaction count")%> <%=@count%>
<div id="filters">
	<%= form_tag transactions_path, :method => :get, :id => "filter_form" do %>
		<%= _("Show per page")%>
    <%= select_tag :per_page, options_from_collection_for_select(@page_sizes, 'to_i', 'to_s', @per_page)%>
  	<%= _('Show') %>
		<%= select_tag :kind, options_for_select(@kinds, @kinds) %>

    <%= _('Period') %>
		<%= select_tag :period, options_for_select(@periods, @periods) %>
  	<%= _('Filter by') %>
    <%= text_field_tag :name, @name, :id => 'name_filter' %> <%= link_to_function(_('clear'), "$('#name_filter').val('').change();") if @name %>


    <div id="custom">
      <br/>
      <%= _('From') %>
      <%= date_select(:from, "written_on")%>
      <br/>
      <%= _('To') %>
      <%= date_select(:to, "written_on")%>
      <br/>
    </div>


   	<p><%= submit_tag _('Search'), :disable_with => _('Searching...') %></p>
	<% end %>
</div>


<h2>transactions</h2>

<div id="transactions">
  <%= render 'transactions' %>
</div>

